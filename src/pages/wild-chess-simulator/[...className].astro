---
import { getCollection } from "astro:content";
import MainLayout from "../../layouts/MainLayout.astro";
import ClassDataJsonFile from "../../../public/ClassDataJsonFile.json";
import PageEntityGrid from "../../components/PageContent/PageEntityGrid.astro";
import PageEffectTable from "../../components/PageContent/PageEffectTable.astro";
//
export let entryMark = await getCollection("docs", (data) => {
	return data.id.includes("class-base-document");
});
export let entryMarkFirst = entryMark[0];
export const markBaseURL = entryMarkFirst.slug.split("/").splice(0, 2).join("/");
const { Content, headings } = await entryMarkFirst?.render();
//
export async function getStaticPaths() {
	return ClassDataJsonFile.classDataJsonArray.map((entry) => ({
		params: {
			className:
				markBaseURL + "/" + entry.Name.toLowerCase().split(" ").join("-"),
		},
		props: { classObject: entry, classString: entry.Name.toLowerCase() },
	}));
}
//
const { className } = Astro.params;
const { classObject, classString } = Astro.props;
//
entryMarkFirst.data.title = "Class - " + classObject.Name;
---

<MainLayout headings={headings} {...entryMarkFirst.data}>
	<Content />
	<PageEffectTable effectArray={classObject} />
	<PageEntityGrid gridFilter={classString} />
</MainLayout>
